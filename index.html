<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lochana Ranathunga | Creative Developer Portfolio</title>

    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');

        :root {
            --primary-hue: 14;
            --secondary-hue: 44;
            --primary-color: hsl(var(--primary-hue), 100%, 68%);
            --secondary-color: hsl(var(--secondary-hue), 98%, 73%);
            --background-color: #0a0a0a;
            --text-color: #d1d1d1;
            --text-muted-color: #888888;
            --card-bg: #131313;
            --border-color: #2a2a2a;
            --accent-gradient: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            overflow-x: hidden;
        }

        /* Global Styles */
        .content-wrapper {
            padding-left: 5%;
            padding-right: 5%;
            max-width: 1300px;
            margin: 0 auto;
            width: 100%;
        }

        .section {
            min-height: 100vh;
            padding: 8rem 0;
            position: relative;
            display: flex;
            align-items: center;
            overflow: hidden;
            z-index: 1;
        }

        #home.section {
            padding-top: 10rem;
            padding-bottom: 6rem;
        }

        /* Headings */
        .section-heading {
            font-size: clamp(2.2rem, 6vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: center;
            color: #fff;
            position: relative;
        }

        .section-heading::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 80px;
            height: 4px;
            background: var(--accent-gradient);
            border-radius: 2px;
            transform-origin: center;
            transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .section-heading.in-view::after {
            transform: translateX(-50%) scaleX(1);
        }

        .section-subheading {
            text-align: center;
            color: var(--text-muted-color);
            margin-bottom: 5rem;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            max-width: 650px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.7;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 0.8rem 2rem;
            background: var(--accent-gradient);
            color: #000;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.35s cubic-bezier(0.19, 1, 0.22, 1);
            text-align: center;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s cubic-bezier(0.19, 1, 0.22, 1);
            z-index: -1;
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 25px -8px hsla(var(--primary-hue), 100%, 68%, 0.4);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            box-shadow: none;
        }

        .btn-secondary::before {
            display: none;
        }

        .btn-secondary:hover {
            background: hsla(var(--primary-hue), 100%, 68%, 0.1);
            box-shadow: 0 8px 15px -5px hsla(var(--primary-hue), 100%, 68%, 0.2);
            color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        /* --- Loading Screen --- */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--background-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 1s ease-out .5s, visibility 1s ease-out .5s;
            /* Added delay to fade out */
            visibility: visible;
            opacity: 1;
        }

        .loader.fade-out {
            opacity: 0;
            visibility: hidden;
        }

        .loader-content {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            /* More space */
        }

        /* Loader Bar Styles */
        .loader-bar-container {
            width: 250px;
            max-width: 80%;
            height: 6px;
            /* Give container height */
        }

        .loader-bar {
            width: 100%;
            height: 100%;
            background-color: #2a2a2a;
            border-radius: 3px;
            overflow: hidden;
        }

        .loader-progress {
            width: 0%;
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 3px;
            transition: width 0.15s linear;
            /* Slightly faster visual update */
        }

        /* --- Three.js Canvas Container --- */
        #three-canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 0;
            opacity: 1;
            pointer-events: none;
        }

        /* --- Navbar --- */
        .navbar {
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: background-color 0.5s ease, backdrop-filter 0.5s ease, box-shadow 0.4s ease, border-color 0.5s ease;
            padding: 0.75rem 0;
            border-bottom: 1px solid transparent;
        }

        .navbar.scrolled {
            background-color: rgba(12, 12, 12, 0.75);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-bottom-color: rgba(255, 255, 255, 0.08);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transform: translateZ(0);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: transform 0.3s ease;
        }

        .navbar-brand:hover {
            transform: scale(1.03);
        }

        .logo-initials {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0a0a0a;
            font-size: 1.1rem;
            font-weight: 700;
            line-height: 1;
            flex-shrink: 0;
        }

        .logo-name {
            color: #ffffff;
            font-size: 1.4rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .nav-link {
            color: var(--text-color);
            transition: color 0.3s ease, transform 0.3s ease;
            position: relative;
            padding-bottom: 6px;
            font-weight: 500;
        }

        .nav-link:hover {
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent-gradient);
            transition: width 0.35s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .nav-link:hover::after {
            width: 70%;
        }

        .nav-link.active {
            color: var(--primary-color);
        }

        .nav-link.active::after {
            width: 70%;
        }

        /* Mobile Menu Container */
        #mobile-menu-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(15px);
            z-index: 999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease, transform 0.4s ease;
            transform: translateY(-20px);
        }

        #mobile-menu-container.open {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #mobile-menu-container a {
            display: block;
            font-size: 1.8rem;
            padding: 1rem 0;
            color: var(--text-color);
            font-weight: 600;
            transition: color 0.3s ease, transform 0.3s ease;
        }

        #mobile-menu-container a:hover {
            color: var(--primary-color);
            transform: scale(1.1);
        }

        #close-menu-btn {
            position: absolute;
            top: 2rem;
            right: 5%;
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
        }

        #close-menu-btn svg {
            width: 30px;
            height: 30px;
        }

        /* Hero Section */
        .hero {
            display: flex;
            align-items: center;
            text-align: center;
        }

        .hero h1 {
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            filter: drop-shadow(0 0 15px hsla(var(--primary-hue), 100%, 68%, 0.3));
        }

        .hero h2 {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            font-weight: 400;
            margin-bottom: 2.5rem;
            color: var(--text-muted-color);
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        @media (max-width: 640px) {
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        /* --- REMOVED: Animated Ellipsis Styles --- */
        /* .animated-ellipsis { ... } */
        /* @keyframes ellipsis-anim { ... } */

        /* Project Cards */
        .project-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            border: 1px solid var(--border-color);
            transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1), box-shadow 0.4s cubic-bezier(0.19, 1, 0.22, 1);
            display: flex;
            flex-direction: column;
        }

        .project-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 30px 50px -15px rgba(0, 0, 0, 0.5);
            border-color: var(--primary-color);
        }

        .project-img-container {
            height: 240px;
            overflow: hidden;
            position: relative;
        }

        .project-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.19, 1, 0.22, 1), filter 0.4s ease;
        }

        .project-card:hover .project-img {
            transform: scale(1.1);
            filter: brightness(0.9);
        }

        .project-content {
            padding: 1.75rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .project-content h3 {
            color: #fff;
            font-size: 1.3rem;
            margin-bottom: 0.75rem;
            font-weight: 600;
        }

        .project-content p {
            color: var(--text-muted-color);
            font-size: 0.95rem;
            line-height: 1.6;
            flex-grow: 1;
            margin-bottom: 1rem;
        }

        .project-tags span {
            background-color: #252525;
            color: #aaa;
            font-size: 0.7rem;
            padding: 0.3rem 0.8rem;
            border-radius: 999px;
            border: 1px solid #333;
            display: inline-block;
            margin: 2px;
            transition: all 0.3s ease;
        }

        .project-tags span:hover {
            background-color: #333;
            color: #fff;
            border-color: #555;
        }

        .project-links {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .project-links a {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 0.9rem;
            transition: color 0.3s ease, letter-spacing 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .project-links a:hover {
            color: var(--secondary-color);
            letter-spacing: 0.5px;
        }

        .project-links a svg {
            width: 16px;
            height: 16px;
            transition: transform 0.3s ease;
        }

        .project-links a:hover svg {
            transform: translateX(3px);
        }

        /* Skills Section */
        .skill-list h4 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .skill-list p {
            color: var(--text-muted-color);
            margin-bottom: 1.5rem;
        }

        .skill-bar-container {
            margin-bottom: 1.75rem;
        }

        .skill-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            font-weight: 500;
            font-size: 0.95rem;
            color: #fff;
        }

        .skill-bar {
            width: 100%;
            height: 10px;
            background-color: #2a2a2a;
            border-radius: 10px;
            overflow: hidden;
        }

        .skill-progress {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 10px;
            width: 0%;
            transition: width 1.8s cubic-bezier(0.19, 1, 0.22, 1);
        }

        /* Tools & Technologies Styles */
        .tools-heading {
            margin-top: 4rem;
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            color: #fff;
        }

        .tools-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.75rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .tool-tag {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            cursor: default;
            font-size: 0.9rem;
            color: var(--text-muted-color);
        }

        .tool-tag:hover {
            background-color: #252525;
            border-color: #555;
            transform: translateY(-2px);
            color: var(--text-color);
        }

        /* Contact Section */
        .contact-icon-wrapper {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background-color: #1f1f1f;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1.2rem;
            transition: all 0.35s cubic-bezier(0.19, 1, 0.22, 1);
            flex-shrink: 0;
            border: 1px solid var(--border-color);
        }

        .contact-icon-wrapper:hover {
            background: var(--accent-gradient);
            transform: scale(1.1) rotate(5deg);
            border-color: transparent;
        }

        .contact-icon-wrapper svg {
            width: 24px;
            height: 24px;
            color: var(--primary-color);
            transition: color 0.3s ease;
        }

        .contact-icon-wrapper:hover svg {
            color: #fff;
        }

        .contact-info p:first-child {
            color: var(--text-muted-color);
            font-size: 0.9rem;
            margin-bottom: 0.1rem;
        }

        .contact-info p:last-child {
            font-weight: 500;
            font-size: 1rem;
            color: #fff;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 1.1rem;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .form-input::placeholder,
        .form-textarea::placeholder {
            color: var(--text-muted-color);
        }

        .form-input:focus,
        .form-textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px hsla(var(--primary-hue), 100%, 68%, 0.2);
        }

        .form-textarea {
            resize: vertical;
            min-height: 140px;
        }

        /* Social Icon Link Styles */
        .follow-heading {
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            font-size: 1.25rem;
            font-weight: 600;
            color: #fff;
        }

        .social-icon-links {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .social-icon-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background-color: #252525;
            color: var(--text-muted-color);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .social-icon-link svg {
            width: 22px;
            height: 22px;
            transition: transform 0.3s ease;
        }

        .social-icon-link:hover {
            background: var(--accent-gradient);
            color: #fff;
            transform: translateY(-4px) scale(1.05);
            border-color: transparent;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        .social-icon-link:hover svg {
            transform: scale(1.1);
        }

        /* Footer */
        footer {
            padding: 3rem 0;
            border-t: 1px solid var(--border-color);
            background-color: #080808;
        }

        footer p {
            color: var(--text-muted-color);
            font-size: 0.9rem;
        }

        /* --- Animation Helpers (Added will-change) --- */
        .gsap-reveal-from-bottom {
            opacity: 0;
            transform: translateY(50px);
            will-change: transform, opacity;
        }

        .gsap-reveal-from-left {
            opacity: 0;
            transform: translateX(-50px);
            will-change: transform, opacity;
        }

        .gsap-reveal-from-right {
            opacity: 0;
            transform: translateX(50px);
            will-change: transform, opacity;
        }

        .gsap-reveal-scale {
            opacity: 0;
            transform: scale(0.9);
            will-change: transform, opacity;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .section {
                padding: 5rem 0;
            }

            #home.section {
                padding-top: 8rem;
                padding-bottom: 4rem;
            }

            .section-heading {
                font-size: clamp(1.8rem, 6vw, 2.5rem);
            }

            .section-subheading {
                margin-bottom: 3rem;
            }

            .md\:grid-cols-2 {
                grid-template-columns: 1fr;
            }

            .lg\:grid-cols-3 {
                grid-template-columns: 1fr;
            }

            #skills .grid {
                gap: 3rem;
            }

            #skills .skill-bars-column {
                margin-top: 2rem;
            }

            .tools-heading {
                margin-top: 3rem;
                font-size: 1.3rem;
            }

            .tools-container {
                gap: 0.5rem;
            }

            .tool-tag {
                padding: 0.4rem 0.8rem;
                font-size: 0.85rem;
            }

            .contact-form-container {
                margin-top: 3rem;
            }

            footer .flex {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }
        }
    </style>
</head>

<body class="antialiased">

    <div id="loader" class="loader">
        <div class="loader-content">Loading Creativity...</div>
        <div class="loader-bar-container mt-4">
            <div class="loader-bar">
                <div id="loader-progress" class="loader-progress"></div>
            </div>
        </div>
    </div>

    <div id="three-canvas-container">
    </div>

    <nav id="navbar" class="navbar">
        <div class="content-wrapper">
            <div class="flex justify-between items-center">
                <a href="#home" title="Lochana Ranathunga - Home" class="navbar-brand">
                    <div class="logo-initials">LR</div>
                    <span class="logo-name">Lochana</span>
                </a>

                <div class="hidden md:flex items-center space-x-10">
                    <a href="#home" class="nav-link">Home</a>
                    <a href="#about" class="nav-link">About</a>
                    <a href="#projects" class="nav-link">Projects</a>
                    <a href="#skills" class="nav-link">Skills</a>
                    <a href="#contact" class="nav-link">Contact</a>
                    <a href="YOUR_FIVERR_URL_HERE" target="_blank" rel="noopener noreferrer"
                       class="btn ml-4 text-sm py-2 px-5 transform hover:scale-105"> Hire Me
                    </a>
                    </div>

                <button class="md:hidden block text-white" id="menu-toggle" aria-label="Toggle Menu">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                </button>
            </div>
        </div>
    </nav>

    <div id="mobile-menu-container">
        <button id="close-menu-btn" aria-label="Close Menu">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                stroke="currentColor" class="w-8 h-8">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
        <div class="flex flex-col items-center space-y-6">
            <a href="#home" class="nav-link">Home</a>
            <a href="#about" class="nav-link">About</a>
            <a href="#projects" class="nav-link">Projects</a>
            <a href="#skills" class="nav-link">Skills</a>
            <a href="#contact" class="nav-link">Contact</a>
        </div>
    </div>

    <section id="home" class="section hero">
        <div class="content-wrapper relative z-10">
            <h1 class="gsap-reveal-from-bottom">LOCHANA RANATHUNGA</h1>
            <h2 class="gsap-reveal-from-bottom" data-gsap-delay="0.2">Digital Craftsman & Creative Technologist</h2>
            <div class="hero-buttons mt-10 gsap-reveal-from-bottom" data-gsap-delay="0.4">
                <a href="#projects" class="btn">Explore My Work</a>
                <a href="#" target="_blank" class="btn btn-secondary">View Resume</a>
            </div>
        </div>
    </section>

    <section id="about" class="section">
        <div class="content-wrapper">
            <h2 class="section-heading gsap-reveal-from-bottom">About Me</h2>
            <p class="section-subheading gsap-reveal-from-bottom" data-gsap-delay="0.2">Blending code, creativity, and
                coffee to build unique digital experiences.</p>
            <div class="grid md:grid-cols-2 gap-16 items-center">
                <div class="gsap-reveal-from-left">
                    <h3 class="text-2xl lg:text-3xl font-semibold mb-5 text-white">Hello! I'm Lochana Ranathunga,</h3>
                    <p class="mb-4 text-lg leading-relaxed"> A passionate Creative Developer based in Colombo, Sri
                        Lanka. I specialize in bringing concepts to life through interactive design and cutting-edge web
                        technologies. My focus is on creating engaging user experiences that are both aesthetically
                        pleasing and highly functional. </p>
                    <p class="mb-6 text-lg leading-relaxed"> With a background that bridges the gap between design
                        thinking and technical execution, I leverage tools like Three.js for immersive 3D visuals, GSAP
                        for fluid animations, and the power of JavaScript to build dynamic interfaces. I thrive on
                        challenges and enjoy collaborating on projects that push creative boundaries. </p>
                    <a href="#contact" class="btn mt-4">Let's Collaborate</a>
                </div>
                <div class="gsap-reveal-from-right" data-gsap-delay="0.3">
                    <div
                        class="bg-gray-800/30 backdrop-blur-sm p-6 rounded-xl shadow-xl border border-gray-700 aspect-square max-w-md mx-auto flex items-center justify-center">
                        <img src="https://via.placeholder.com/400x400/FF7F50/0a0a0a?text=Lochana+R."
                            alt="Lochana Ranathunga" class="rounded-lg w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="projects" class="section" style="background-color: rgba(14, 14, 14, 0.6);">
        <div class="content-wrapper">
            <h2 class="section-heading gsap-reveal-from-bottom">Featured Projects</h2>
            <p class="section-subheading gsap-reveal-from-bottom" data-gsap-delay="0.2">A selection of recent work
                showcasing my passion for interactive development.</p>
            <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-10">
                <div class="project-card gsap-reveal-scale">
                    <div class="project-img-container"><img
                            src="https://via.placeholder.com/600x400/4682B4/0a0a0a?text=Project+One" alt="Project 1"
                            class="project-img"></div>
                    <div class="project-content">
                        <h3>Project Title One</h3>
                        <p class="text-sm">Brief project description highlighting key features and tech used.</p>
                        <div class="project-tags mt-auto flex flex-wrap gap-2 mb-4">
                            <span>Three.js</span><span>GSAP</span><span>Interaction</span> </div>
                        <div class="project-links"> <a href="#" target="_blank" rel="noopener noreferrer">View Live <svg
                                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">
                                    </path>
                                </svg></a> <a href="#" target="_blank" rel="noopener noreferrer">GitHub <svg fill="none"
                                    stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0020 4.77 5.07 5.07 0 0019.91 1S18.73.65 16 2.48a13.38 13.38 0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 005 4.77a5.44 5.44 0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 009 18.13V22">
                                    </path>
                                </svg></a> </div>
                    </div>
                </div>
                <div class="project-card gsap-reveal-scale" data-gsap-delay="0.15">
                    <div class="project-img-container"><img
                            src="https://via.placeholder.com/600x400/32CD32/0a0a0a?text=Project+Two" alt="Project 2"
                            class="project-img"></div>
                    <div class="project-content">
                        <h3>Project Title Two</h3>
                        <p class="text-sm">Brief project description highlighting key features and tech used.</p>
                        <div class="project-tags mt-auto flex flex-wrap gap-2 mb-4">
                            <span>GSAP</span><span>ScrollTrigger</span><span>Tailwind</span> </div>
                        <div class="project-links"> <a href="#" target="_blank" rel="noopener noreferrer">View Live <svg
                                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">
                                    </path>
                                </svg></a> <a href="#" target="_blank" rel="noopener noreferrer">GitHub <svg fill="none"
                                    stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0020 4.77 5.07 5.07 0 0019.91 1S18.73.65 16 2.48a13.38 13.38 0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 005 4.77a5.44 5.44 0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 009 18.13V22">
                                    </path>
                                </svg></a> </div>
                    </div>
                </div>
                <div class="project-card gsap-reveal-scale" data-gsap-delay="0.3">
                    <div class="project-img-container"><img
                            src="https://via.placeholder.com/600x400/FFD700/0a0a0a?text=Project+Three" alt="Project 3"
                            class="project-img"></div>
                    <div class="project-content">
                        <h3>Project Title Three</h3>
                        <p class="text-sm">Brief project description highlighting key features and tech used.</p>
                        <div class="project-tags mt-auto flex flex-wrap gap-2 mb-4">
                            <span>JavaScript</span><span>UI/UX</span><span>CSS</span> </div>
                        <div class="project-links"> <a href="#" target="_blank" rel="noopener noreferrer">View Live <svg
                                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">
                                    </path>
                                </svg></a> <a href="#" target="_blank" rel="noopener noreferrer">GitHub <svg fill="none"
                                    stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0020 4.77 5.07 5.07 0 0019.91 1S18.73.65 16 2.48a13.38 13.38 0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 005 4.77a5.44 5.44 0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 009 18.13V22">
                                    </path>
                                </svg></a> </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="skills" class="section">
        <div class="content-wrapper">
            <h2 class="section-heading gsap-reveal-from-bottom">My Tech Stack & Skills</h2>
            <p class="section-subheading gsap-reveal-from-bottom" data-gsap-delay="0.2">The technologies and tools I
                utilize to build engaging digital experiences.</p>
            <div class="grid md:grid-cols-2 gap-12 lg:gap-20 items-start">
                <div class="skill-list gsap-reveal-from-left">
                    <h3 class="text-2xl font-semibold mb-6 text-white">Core Areas</h3>
                    <div>
                        <h4>Front-End Development</h4>
                        <p>HTML5, CSS3, JavaScript (ESNext), Tailwind CSS, Responsive & Adaptive Design, Cross-Browser
                            Compatibility, Performance Optimization.</p>
                    </div>
                    <div>
                        <h4>Creative & Interaction</h4>
                        <p>Three.js (WebGL), GSAP (Animation), ScrollTrigger, Interactive UI/UX, Creative Coding
                            Concepts, Micro-interactions.</p>
                    </div>
                    <div>
                        <h4>Tools & Workflow</h4>
                        <p>Git, GitHub/GitLab, VS Code, npm/yarn, Figma (Prototyping & Handoff), Browser Developer
                            Tools, Performance Auditing.</p>
                    </div>
                    <div>
                        <h4>Design Principles</h4>
                        <p>UI/UX Fundamentals, Typography, Color Theory, Layout & Composition, Accessibility Standards
                            (WCAG).</p>
                    </div>
                </div>
                <div class="skill-bars-column gsap-reveal-from-right" data-gsap-delay="0.3">
                    <h3 class="text-2xl font-semibold mb-8 text-white">Technical Proficiency</h3>
                    <div class="skill-bar-container">
                        <div class="skill-label"><span>HTML & CSS / Tailwind</span><span>95%</span></div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="95"></div>
                        </div>
                    </div>
                    <div class="skill-bar-container">
                        <div class="skill-label"><span>JavaScript (ESNext)</span><span>90%</span></div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="90"></div>
                        </div>
                    </div>
                    <div class="skill-bar-container">
                        <div class="skill-label"><span>Three.js / WebGL</span><span>85%</span></div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="85"></div>
                        </div>
                    </div>
                    <div class="skill-bar-container">
                        <div class="skill-label"><span>GSAP Animation</span><span>90%</span></div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="90"></div>
                        </div>
                    </div>
                    <div class="skill-bar-container">
                        <div class="skill-label"><span>Interaction Design</span><span>88%</span></div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="88"></div>
                        </div>
                    </div>
                    <div class="skill-bar-container">
                        <div class="skill-label"><span>Responsive Design</span><span>98%</span></div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="98"></div>
                        </div>
                    </div>
                    <div class="skill-bar-container">
                        <div class="skill-label"><span>Version Control (Git)</span><span>90%</span></div>
                        <div class="skill-bar">
                            <div class="skill-progress" data-width="90"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-16 gsap-reveal-from-bottom" data-gsap-delay="0.5">
                <h3 class="tools-heading">Tools & Technologies I Use</h3>
                <div class="tools-container">
                    <span class="tool-tag">HTML5</span> <span class="tool-tag">CSS3</span> <span
                        class="tool-tag">JavaScript (ES6+)</span> <span class="tool-tag">Tailwind CSS</span> <span
                        class="tool-tag">Three.js</span> <span class="tool-tag">GSAP</span> <span
                        class="tool-tag">ScrollTrigger</span> <span class="tool-tag">WebGL</span> <span
                        class="tool-tag">Git</span> <span class="tool-tag">GitHub</span> <span class="tool-tag">npm /
                        yarn</span> <span class="tool-tag">VS Code</span> <span class="tool-tag">Figma</span> <span
                        class="tool-tag">Blender (Basic)</span> <span class="tool-tag">Node.js (Basic)</span>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="section">
        <div class="content-wrapper">
            <h2 class="section-heading gsap-reveal-from-bottom">Let's Connect</h2>
            <p class="section-subheading gsap-reveal-from-bottom" data-gsap-delay="0.2">Have an idea or just want to
                chat? Drop me a line!</p>
            <div class="grid md:grid-cols-2 gap-12 lg:gap-20">
                <div class="gsap-reveal-from-left">
                    <h3 class="text-xl lg:text-2xl font-semibold mb-8 text-white">Contact Details</h3>
                    <div class="flex items-center mb-8">
                        <div class="contact-icon-wrapper"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                                </path>
                            </svg></div>
                        <div class="contact-info">
                            <p>Email</p>
                            <p>lochana.r@example.com</p>
                        </div>
                    </div>
                    <div class="flex items-center mb-8">
                        <div class="contact-icon-wrapper"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z">
                                </path>
                            </svg></div>
                        <div class="contact-info">
                            <p>Phone (Optional)</p>
                            <p>+94 7X XXX XXXX</p>
                        </div>
                    </div>
                    <div class="flex items-center mb-8">
                        <div class="contact-icon-wrapper"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                                </path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg></div>
                        <div class="contact-info">
                            <p>Location</p>
                            <p>Colombo, Sri Lanka</p>
                        </div>
                    </div>

                    <div class="gsap-reveal-from-bottom" data-gsap-delay="0.4">
                        <h3 class="follow-heading">Follow Me</h3>
                        <div class="social-icon-links">
                            <a href="#" target="_blank" rel="noopener noreferrer" class="social-icon-link"
                                aria-label="Lochana Ranathunga on LinkedIn"> <svg role="img" viewBox="0 0 24 24"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <title>LinkedIn</title>
                                    <path
                                        d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.225 0z">
                                    </path>
                                </svg> </a>
                            <a href="#" target="_blank" rel="noopener noreferrer" class="social-icon-link"
                                aria-label="Lochana Ranathunga on Instagram"> <svg role="img" viewBox="0 0 24 24"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <title>Instagram</title>
                                    <path
                                        d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.06 1.17-.249 1.805-.413 2.227-.217.562-.477.96-.896 1.381-.42.419-.82.679-1.38.896-.422.164-1.057.36-2.227.413-1.266.057-1.646.07-4.85.07s-3.585-.015-4.85-.074c-1.17-.06-1.805-.249-2.227-.413-.562-.217-.96-.477-1.381-.896-.419-.42-.679-.82-8.96-1.381-.164-.422-.36-1.057-.413-2.227-.057-1.266-.07-1.646-.07-4.85s.015-3.585.074-4.85c.06-1.17.249-1.805.413-2.227.217-.562.477-.96.896-1.381.42-.419.819-.679 1.381-.896.422-.164 1.057-.36 2.227-.413 1.266-.057 1.646-.07 4.85-.07zm0 4.86c-3.396 0-6.135 2.741-6.135 6.137 0 3.394 2.739 6.135 6.135 6.135s6.137-2.741 6.137-6.135c0-3.396-2.741-6.137-6.137-6.137zm0 9.898c-2.08 0-3.76-1.681-3.76-3.76 0-2.082 1.68-3.76 3.76-3.76s3.76 1.68 3.76 3.76c0 2.079-1.68 3.76-3.76 3.76zm4.905-9.848c-.439 0-.79.35-.79.79s.35.79.79.79.79-.35.79-.79-.351-.79-.79-.79z">
                                    </path>
                                </svg> </a>
                            <a href="#" target="_blank" rel="noopener noreferrer" class="social-icon-link"
                                aria-label="Lochana Ranathunga on Facebook"> <svg role="img" viewBox="0 0 24 24"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <title>Facebook</title>
                                    <path
                                        d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z">
                                    </path>
                                </svg> </a>
                            <a href="#" target="_blank" rel="noopener noreferrer" class="social-icon-link"
                                aria-label="Lochana Ranathunga on YouTube"> <svg role="img" viewBox="0 0 24 24"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <title>YouTube</title>
                                    <path
                                        d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z">
                                    </path>
                                </svg> </a>
                            <a href="#" target="_blank" rel="noopener noreferrer" class="social-icon-link"
                                aria-label="Lochana Ranathunga on GitHub"> <svg role="img" viewBox="0 0 24 24"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <title>GitHub</title>
                                    <path
                                        d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22v3.293c0 .319.19.694.824.577C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
                                </svg> </a>
                        </div>
                    </div>

                    <div class="mt-10 gsap-reveal-from-bottom" data-gsap-delay="0.6">
                        <a href="YOUR_FIVERR_URL_HERE" target="_blank" rel="noopener noreferrer"
                           class="btn inline-block w-full sm:w-auto text-center text-base py-3 transform hover:scale-105"> Hire Me on Fiverr! </a>
                    </div>

                </div>
                <div class="contact-form-container gsap-reveal-from-right" data-gsap-delay="0.3">
                    <h3 class="text-xl lg:text-2xl font-semibold mb-8 text-white">Send a Message</h3>
                    <form name="contact" method="POST" data-netlify="true">
                        <!-- Netlify honeypot field (anti-spam) -->
                        <input type="hidden" name="form-name" value="contact">
                        <p style="display:none">
                            <label>Don’t fill this out if you're human: <input name="bot-field" /></label>
                        </p>
                
                        <div class="mb-5">
                            <label for="contact-name" class="block text-sm font-medium mb-2 text-gray-400">Name</label>
                            <input type="text" id="contact-name" name="name" class="form-input" placeholder="Your Name" required>
                        </div>
                        <div class="mb-5">
                            <label for="contact-email" class="block text-sm font-medium mb-2 text-gray-400">Email</label>
                            <input type="email" id="contact-email" name="email" class="form-input" placeholder="Your Email" required>
                        </div>
                        <div class="mb-5">
                            <label for="contact-message" class="block text-sm font-medium mb-2 text-gray-400">Message</label>
                            <textarea id="contact-message" name="message" rows="5" class="form-textarea" placeholder="How can I help?" required></textarea>
                        </div>
                        <button type="submit" class="btn w-full">Send Message</button>
                    </form>
                    <div id="form-status-message" class="mt-4 text-center"></div>
                </div>
                
            </div>
        </div>
    </section>

    <footer class="text-center">
        <div class="content-wrapper">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <p>&copy; <span id="current-year"></span> Lochana Ranathunga. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.29/dist/lenis.min.js"></script>
    <script>
        // Wrap everything in DOMContentLoaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM fully loaded and parsed");

            // --- Elements ---
            const loader = document.getElementById('loader');
            const loaderProgress = document.getElementById('loader-progress');
            const navbar = document.getElementById('navbar');
            const mobileMenuContainer = document.getElementById('mobile-menu-container');
            const menuToggle = document.getElementById('menu-toggle');
            const closeMenuBtn = document.getElementById('close-menu-btn');
            const mobileMenuLinks = mobileMenuContainer ? mobileMenuContainer.querySelectorAll('a.nav-link') : [];
            const navLinks = navbar ? navbar.querySelectorAll('.hidden.md\\:flex a.nav-link') : [];

            // --- Lenis Smooth Scroll Initialization ---
            let lenis = null;
            if (typeof Lenis !== 'undefined') {
                try {
                    lenis = new Lenis({ duration: 1.4, smoothWheel: true });
                    function raf(time) { if (lenis) lenis.raf(time); requestAnimationFrame(raf); }
                    requestAnimationFrame(raf);
                    console.log("Lenis initialized.");
                } catch (e) { console.error("Failed to initialize Lenis:", e); }
            } else { console.warn("Lenis library not loaded!"); }

            // --- Loader Logic ---
            let progress = 0;
            let progressInterval = null;
            const totalLoadTime = 2800; // **** Increased Loading time to 2.8 seconds ****

            function updateLoaderProgress() {
                if (!loaderProgress) return;
                const intervalTime = 25; // Update slightly less frequently
                const increment = (100 / (totalLoadTime / intervalTime));
                progress += increment;
                loaderProgress.style.width = `${Math.min(progress, 100)}%`;

                if (progress >= 100) {
                    clearInterval(progressInterval);
                    console.log("Loader progress visually complete.");
                    // Trigger fade out slightly after 100% is visually reached
                    setTimeout(hideLoader, 200); // Small delay before hiding
                }
            }

            function startLoaderSimulation() {
                if (loaderProgress) {
                    clearInterval(progressInterval);
                    progress = 0;
                    loaderProgress.style.width = '0%';
                    const intervalTime = 25; // ms
                    progressInterval = setInterval(updateLoaderProgress, intervalTime);
                    console.log("Loader simulation started (Duration: " + totalLoadTime + "ms).");
                } else { console.warn("Loader progress bar element not found."); }
            }

            function hideLoader() {
                if (!loader || loader.style.opacity === '0') return; // Prevent multiple calls
                clearInterval(progressInterval); // Ensure interval is stopped
                if (loaderProgress && progress < 100) loaderProgress.style.width = '100%'; // Force 100%

                console.log("Hiding loader overlay...");
                loader.classList.add('fade-out');
                // The fade-out duration is set in CSS (1s), the visibility delay matches it
                setTimeout(() => {
                    if (loader) loader.style.display = 'none';
                    document.body.style.overflowY = 'auto';
                    console.log("Loader hidden, initializing page scripts...");
                    // Initialize scripts AFTER fade out animation completes (1s + slight buffer)
                    gsap.delayedCall(0.1, initializePageScripts);
                }, 1500); // Match CSS fadeout (1s) + delay (0.5s)
            }

            function initializePageScripts() {
                console.log("Running initializePageScripts...");
                try {
                    initNavbarLogic();
                    initScrollSpy();
                    animateHeroText();
                    initScrollBasedAnimations();
                    animateSkillBars();
                    initThreeJsScene();
                } catch (e) { console.error("Error during page script initialization:", e); }
                console.log("Page initialization attempts complete.");
            }

            if (loader) {
                document.body.style.overflowY = 'hidden';
                startLoaderSimulation();
                // We rely on the progress interval calling hideLoader now
                // Fallback timeout remains just in case
                setTimeout(() => {
                    if (loader && loader.style.display !== 'none') {
                        console.warn("Loader fallback timeout triggered.");
                        hideLoader();
                    }
                }, totalLoadTime + 2000); // Extended fallback

            } else {
                console.log("No loader found, initializing directly.");
                document.body.style.overflowY = 'auto';
                setTimeout(initializePageScripts, 100);
            }

            // --- GSAP / ScrollTrigger Setup ---
            function initGsap() {
                if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
                    gsap.registerPlugin(ScrollTrigger);
                    if (lenis) {
                        lenis.on('scroll', ScrollTrigger.update);
                        gsap.ticker.add((time) => { if (lenis) lenis.raf(time * 1000); });
                        gsap.ticker.lagSmoothing(0);
                        console.log("GSAP ScrollTrigger synced with Lenis.");
                    } else {
                        console.warn("Lenis not available for ScrollTrigger sync. Using native scroll.");
                        window.addEventListener('scroll', ScrollTrigger.update, { passive: true });
                    }
                } else { console.error("GSAP or ScrollTrigger not loaded! Animations will fail."); }
            }
            initGsap();

            // --- Navbar Logic ---
            function initNavbarLogic() {
                if (navbar && typeof ScrollTrigger !== 'undefined') {
                    ScrollTrigger.create({ trigger: document.body, start: 'top -80', end: 99999, toggleClass: { className: 'scrolled', targets: navbar } });
                    console.log("Navbar scroll effect initialized.");
                } else { console.error("Navbar element or ScrollTrigger not found for scroll effect."); }

                if (menuToggle && mobileMenuContainer && closeMenuBtn) {
                    console.log("Initializing mobile menu toggle...");
                    menuToggle.addEventListener('click', () => {
                        console.log("Menu toggle clicked!");
                        mobileMenuContainer.classList.toggle('open');
                        if (mobileMenuContainer.classList.contains('open')) { if (lenis) lenis.stop(); }
                        else { if (lenis) lenis.start(); }
                    });
                    closeMenuBtn.addEventListener('click', () => { console.log("Close button clicked!"); mobileMenuContainer.classList.remove('open'); if (lenis) lenis.start(); });
                    if (mobileMenuLinks.length > 0) { mobileMenuLinks.forEach(link => { link.addEventListener('click', () => { mobileMenuContainer.classList.remove('open'); if (lenis) lenis.start(); }); }); }
                    console.log("Mobile menu listeners attached.");
                } else { console.error("Mobile menu elements not found:", { menuToggle, mobileMenuContainer, closeMenuBtn }); }
            }

            // --- ScrollSpy ---
            function initScrollSpy() {
                if (typeof ScrollTrigger === 'undefined') return;
                console.log("Initializing ScrollSpy...");
                const sections = document.querySelectorAll('section[id]');
                if (sections.length === 0 || (navLinks.length === 0 && mobileMenuLinks.length === 0)) { console.warn("Scrollspy: Missing sections or links."); return; }
                sections.forEach(section => { ScrollTrigger.create({ trigger: section, start: 'top center+=20%', end: 'bottom center-=20%', onToggle: (self) => { if (self.isActive) setActiveLink(section.id); } }); });
                console.log(`Scrollspy initialized for ${sections.length} sections.`);
                setTimeout(() => { /* ... set initial active link ... */
                    let currentSection = ''; let minTop = window.innerHeight;
                    sections.forEach(section => { const rect = section.getBoundingClientRect(); if (rect.top < minTop && rect.top <= window.innerHeight * 0.5 && rect.bottom >= window.innerHeight * 0.5) { minTop = rect.top; currentSection = section.id; } });
                    if (!currentSection && sections.length > 0) currentSection = sections[0].id;
                    setActiveLink(currentSection); console.log(`Initial active section set to: ${currentSection || 'none'}`);
                }, 300);
            }
            function setActiveLink(sectionId) {
                const targetHref = `#${sectionId}`;
                navLinks.forEach(link => { link.classList.toggle('active', link.getAttribute('href') === targetHref); });
                mobileMenuLinks.forEach(link => { link.classList.toggle('active', link.getAttribute('href') === targetHref); });
            }

            // --- Hero Text Animation ---
            function animateHeroText() {
                if (typeof gsap === 'undefined') return;
                gsap.utils.toArray('.hero .gsap-reveal-from-bottom').forEach((elem, index) => { gsap.to(elem, { opacity: 1, y: 0, duration: 1.2, ease: 'power3.out', delay: elem.dataset.gsapDelay ? parseFloat(elem.dataset.gsapDelay) : index * 0.15 }); });
                console.log("Hero text animated.");
            }

            // --- General Scroll-Based Animations ---
            function initScrollBasedAnimations() {
                if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') return;
                gsap.utils.toArray('.section-heading').forEach(heading => { ScrollTrigger.create({ trigger: heading, start: 'top 85%', onEnter: () => heading.classList.add('in-view'), once: true }); });
                gsap.utils.toArray('.gsap-reveal-from-bottom:not(.hero .gsap-reveal-from-bottom)').forEach((elem) => { gsap.fromTo(elem, { opacity: 0, y: 50 }, { opacity: 1, y: 0, duration: 1, ease: 'power3.out', scrollTrigger: { trigger: elem, start: "top 90%", once: true }, delay: elem.dataset.gsapDelay ? parseFloat(elem.dataset.gsapDelay) : 0 }); });
                gsap.utils.toArray('.gsap-reveal-from-left').forEach((elem) => { gsap.fromTo(elem, { opacity: 0, x: -60 }, { opacity: 1, x: 0, duration: 1.2, ease: 'power3.out', scrollTrigger: { trigger: elem, start: "top 85%", once: true }, delay: elem.dataset.gsapDelay ? parseFloat(elem.dataset.gsapDelay) : 0 }); });
                gsap.utils.toArray('.gsap-reveal-from-right').forEach((elem) => { gsap.fromTo(elem, { opacity: 0, x: 60 }, { opacity: 1, x: 0, duration: 1.2, ease: 'power3.out', scrollTrigger: { trigger: elem, start: "top 85%", once: true }, delay: elem.dataset.gsapDelay ? parseFloat(elem.dataset.gsapDelay) : 0 }); });
                gsap.utils.toArray('.gsap-reveal-scale').forEach((elem) => { gsap.fromTo(elem, { opacity: 0, scale: 0.9 }, { opacity: 1, scale: 1, duration: 1, ease: 'power3.out', scrollTrigger: { trigger: elem, start: "top 90%", once: true }, delay: elem.dataset.gsapDelay ? parseFloat(elem.dataset.gsapDelay) : 0 }); });
                console.log("Scroll animations initialized.");
            }

            // --- Animate Skill Bars ---
            function animateSkillBars() {
                if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') return;
                const skillProgressBars = document.querySelectorAll('.skill-progress');
                if (skillProgressBars.length === 0) { console.warn("No skill bars found."); return; }
                skillProgressBars.forEach(bar => { const targetWidth = bar.dataset.width || '0'; gsap.to(bar, { width: `${targetWidth}%`, duration: 1.8, ease: 'cubic-bezier(0.19, 1, 0.22, 1)', scrollTrigger: { trigger: bar.closest('.skill-bar-container'), start: "top 85%", once: true } }); });
                console.log("Skill bar animations initialized.");
            }

            // --- Original Three.js Particle Scene ---
            function initThreeJsScene() {
                if (typeof THREE === 'undefined') { console.error("THREE library not loaded!"); return; }
                console.log("Attempting to initialize Three.js scene (original particle system)...");
                const container = document.getElementById('three-canvas-container');
                if (!container) { console.error("Three.js container '#three-canvas-container' not found!"); return; }
                let canvas = container.querySelector('canvas');
                if (canvas) { console.log("Removing existing canvas before re-init."); container.removeChild(canvas); }

                try {
                    const scene = new THREE.Scene();
                    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                    camera.position.z = 50;
                    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                    renderer.setSize(window.innerWidth, window.innerHeight);
                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); // Limit pixel ratio for performance
                    container.appendChild(renderer.domElement);

                    const particlesGeometry = new THREE.BufferGeometry();
                    const particlesCount = 1500; // Keep original count
                    const posArray = new Float32Array(particlesCount * 3);
                    for (let i = 0; i < particlesCount * 3; i++) { posArray[i] = (Math.random() - 0.5) * 100; }
                    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
                    const particlesMaterial = new THREE.PointsMaterial({ size: 0.19, color: 0xc48f8f, transparent: true });
                    const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
                    scene.add(particlesMesh);

                    const mouse = { x: 0, y: 0 };
                    const handleMouseMove = (event) => { mouse.x = (event.clientX / window.innerWidth) * 2 - 1; mouse.y = -(event.clientY / window.innerHeight) * 2 + 1; };
                    document.addEventListener('mousemove', handleMouseMove, { passive: true });

                    let animationFrameId = null; const rotationSpeed = 0.001;
                    function animate() {
                        animationFrameId = requestAnimationFrame(animate);
                        particlesMesh.rotation.x += rotationSpeed * 0.8; particlesMesh.rotation.y += rotationSpeed * 0.5;
                        particlesMesh.rotation.y += (mouse.x * 0.02 - particlesMesh.rotation.y) * 0.02;
                        particlesMesh.rotation.x += (mouse.y * 0.02 - particlesMesh.rotation.x) * 0.02;
                        renderer.render(scene, camera);
                    }
                    const onWindowResize = () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); }; // Limit pixel ratio on resize too
                    window.addEventListener('resize', onWindowResize);
                    animate();
                    console.log("Original Three.js particle system initialized successfully.");
                } catch (error) { console.error("Error initializing Three.js:", error); if (container) container.style.display = 'none'; }
            }

            // --- Footer Current Year ---
            const yearSpan = document.getElementById('current-year');
            if (yearSpan) yearSpan.textContent = new Date().getFullYear();


            // --- Contact Form Status Handling ---
            function handleContactFormStatus() {
                const formStatusDiv = document.getElementById('form-status-message');
                if (!formStatusDiv) {
                    console.warn("Form status message div not found.");
                    return;
                }

                const urlParams = new URLSearchParams(window.location.search);
                const status = urlParams.get('status');
                const msg = urlParams.get('msg'); // Get encoded message

                let messageText = '';
                let messageClass = '';

                if (status === 'success') {
                    messageText = 'Message sent successfully! Thank you.';
                    messageClass = 'text-green-500';
                } else if (status === 'error') {
                    // Decode the URL encoded message
                    messageText = msg ? decodeURIComponent(msg.replace(/\+/g, ' ')) : 'An unexpected error occurred.';
                    messageClass = 'text-red-500';
                } else if (status === 'validation_error') {
                    messageText = msg ? decodeURIComponent(msg.replace(/\+/g, ' ')) : 'Please check the form fields.';
                    messageClass = 'text-yellow-500';
                }

                if (messageText) {
                    formStatusDiv.textContent = messageText;
                    formStatusDiv.className = `mt-4 text-center font-medium ${messageClass}`;

                    // Clear message and URL parameter after some time
                    setTimeout(() => {
                        formStatusDiv.textContent = '';
                        formStatusDiv.className = 'mt-4 text-center';
                        if (window.history.replaceState) {
                            // Keep hash for scroll position
                            const cleanURL = window.location.pathname + window.location.hash;
                            window.history.replaceState({ path: cleanURL }, '', cleanURL);
                        }
                    }, 7000); // Clear after 7 seconds
                }
            }

            // Call this within initializePageScripts or after it
            // Ensure it's called AFTER the DOM is ready and other initializations might have occurred
            if (document.readyState === 'complete') {
                handleContactFormStatus();
            } else {
                window.addEventListener('load', handleContactFormStatus); // Fallback to window.load
            }

        }); // End DOMContentLoaded
    </script>
    </script>

</body>

</html>